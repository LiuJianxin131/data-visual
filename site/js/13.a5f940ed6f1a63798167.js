(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{765:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n(279);const i={javascript:()=>n.e(17).then(function(){var e=n(778);return"object"==typeof e&&e&&e.__esModule?e:Object.assign({},"object"==typeof e&&e,{default:e})}),json:()=>n.e(16).then(function(){var e=n(777);return"object"==typeof e&&e&&e.__esModule?e:Object.assign({},"object"==typeof e&&e,{default:e})})},s={dracula:()=>n.e(20).then(function(){var e=n(776);return"object"==typeof e&&e&&e.__esModule?e:Object.assign({},"object"==typeof e&&e,{default:e})}),github:()=>n.e(19).then(function(){var e=n(775);return"object"==typeof e&&e&&e.__esModule?e:Object.assign({},"object"==typeof e&&e,{default:e})})};var r=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function s(e){try{h(o.next(e))}catch(e){i(e)}}function r(e){try{h(o.throw(e))}catch(e){i(e)}}function h(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,r)}h((o=o.apply(e,t||[])).next())})};class h extends o.Component{constructor(e){super(e),this.elRef=o.createRef(),this.handleChange=this.handleChange.bind(this)}handleChange(e){this.props.onChange(this.editor.getValue())}componentDidMount(){return r(this,void 0,void 0,function*(){const{mode:e,theme:t,value:n}=this.props;yield this.setEditor(e,t),this.editor.$blockScrolling=1/0,this.editor.on("change",this.handleChange),this.editor.setValue(n)})}setEditor(e,t){return r(this,void 0,void 0,function*(){yield i[e](),yield s[t](),this.editor=a.edit(this.elRef.current),this.editor.getSession().setMode(`ace/mode/${e}`),this.editor.setTheme(`ace/theme/${t}`)})}componentDidUpdate(e){return r(this,void 0,void 0,function*(){const{mode:t,theme:n,value:o}=this.props;t===e.mode&&n===e.theme||(yield this.setEditor(t,n)),this.editor.setValue(o)})}componentWillUnmount(){this.editor.destroy()}render(){const{width:e,height:t}=this.props;return o.createElement("div",{style:{width:e,height:t},ref:this.elRef})}}h.defaultProps={width:"100%",height:"100%",value:""};var d=n(6),c=n.n(d);n.d(t,"default",function(){return u});class u extends o.Component{constructor(e){super(e),this.updateChart=this.updateChart.bind(this),this.handleValueChange=this.handleValueChange.bind(this)}handleValueChange(e){this.value=e}updateChart(){try{const{updateChart:e,chart:t}=this.props,{seriesItemTemplate:n,option:{series:o}}=t,a=JSON.parse(this.value);let i=[];for(let e=0,t=a.length;e<t;e++){const t=a[e];let s,r;r="number"==typeof n.data[0]||"[object Array]"===Object.prototype.toString.call(n.data[0])?t.data:c()(n.data,{$merge:t.data});let h={};for(let a in n)"data"!==a?"name"!==a?o.length>e?h[a]=o[e][a]:h[a]=n[a]:h.name=t.name:h.data=[...r];s=c()(n,{$merge:h}),i.push(s)}e(c()(t,{option:{series:{$set:i}}}))}catch(e){console.error(e)}}render(){const{chart:{option:{series:e}}}=this.props;let t=[];return e.forEach(e=>{t.push({name:e.name,data:e.data})}),this.value=JSON.stringify(t,null,"\t"),o.createElement("div",{className:"data_editor_wrapper"},o.createElement(h,{value:this.value,onChange:this.handleValueChange,mode:"json",theme:"dracula",width:"100%",height:"600px"}),o.createElement("button",{onClick:this.updateChart},"更新"))}}}}]);
//# sourceMappingURL=13.a5f940ed6f1a63798167.js.map